version: 1
root:
  level: NOTSET
  handlers: [noHandler]

loggers:
  connect:
    level: DEBUG
    handlers: [logstash,console]
  frontend:
    level: DEBUG
    handlers: [logstash,console]
  ingestion:
    level: DEBUG
    handlers: [logstash,console]
  keyserver:
    level: DEBUG
    handlers: [logstash,console]
  vault:
    level: DEBUG
    handlers: [logstash,console]
  verify:
    level: DEBUG
    handlers: [logstash,console]
  socket-utils:
    level: DEBUG
    handlers: [logstash,console]
  inbox:
    level: DEBUG
    handlers: [logstash,console]
  utils:
    level: DEBUG
    handlers: [logstash,console]
  amqp:
    level: DEBUG
    handlers: [logstash,console]
  db:
    level: DEBUG
    handlers: [logstash,console]
  crypto:
    level: DEBUG
    handlers: [logstash,console]
  asyncio:
    level: DEBUG
    handlers: [logstash]
  aiopg:
    level: DEBUG
    handlers: [logstash]
  aiohttp.access:
    level: DEBUG
    handlers: [logstash]
  aiohttp.client:
    level: DEBUG
    handlers: [logstash]
  aiohttp.internal:
    level: DEBUG
    handlers: [logstash]
  aiohttp.server:
    level: DEBUG
    handlers: [logstash]
  aiohttp.web:
    level: DEBUG
    handlers: [logstash]
  aiohttp.websocket:
    level: DEBUG
    handlers: [logstash]


handlers:
  noHandler:
    class: logging.NullHandler
    level: NOTSET
  console:
    class: logging.StreamHandler
    formatter: simple
    stream: ext://sys.stdout
  logstash:
    class: lega.utils.logging.LogstashHandler
    formatter: json
    host: ega_monitor
    port: 5600

formatters:
  json:
    format: '{"timeLogged": "%(asctime)s", "name": "%(name)s", "process": "%(process)s", "processName": "%(processName)s", "levelName": "%(levelname)s", "lineNumber": "%(lineno)s", "functionName": "%(funcName)s", "message": "%(message)s"}'
  lega:
    format: '[{asctime:<20}][{name}][{process:d} {processName:>15}][{levelname}] (L:{lineno}) {funcName}: {message}'
    style: '{'
    datefmt: '%Y-%m-%d %H:%M:%S'
  simple:
    format: '[{name:^10}][{levelname:^6}] (L{lineno}) {message}'
    style: '{'
